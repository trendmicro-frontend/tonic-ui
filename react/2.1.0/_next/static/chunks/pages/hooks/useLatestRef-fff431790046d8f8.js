(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{17509:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(52322),o=n(45392),a=n(96835),l=n(49857),c=n(62080),i=n(68010),u=n(2784),s=function(e){var t=(0,u.useRef)(e);return t.current=e,t};function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,c=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=function(){var e=d((0,u.useState)(!1),2),t=e[0],n=e[1],r=(0,u.useRef)(null),o=d((0,u.useState)(0),2),a=o[0],f=o[1],h=s(a);return u.createElement(u.Fragment,null,u.createElement(l.Z,{mb:"4x"},"You clicked ",a," times"),u.createElement(c.Z,{disabled:t,onClick:function(){r.current&&(clearTimeout(r.current),r.current=null),r.current=setTimeout(function(){alert("Latest count value: ".concat(h.current)),r.current=null,n(!1)},3e3),n(!0)}},"Show Alert In 5 Seconds"),u.createElement(i.Z,{width:"2x"}),u.createElement(c.Z,{disabled:!t,onClick:function(){return f(a+1)}},"Click Me"))};function m(e){var t=Object.assign({div:"div",h1:"h1",p:"p",h2:"h2",a:"a",svg:"svg",use:"use",pre:"pre",code:"code",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,o.ah)(),e.components);return(0,r.jsxs)(t.div,{className:"main-content",children:["\n","\n",(0,r.jsx)(t.h1,{id:"uselatestref",children:"useLatestRef"}),"\n",(0,r.jsx)(t.p,{children:"A custom Hook that returns a ref object with the latest value."}),"\n",(0,r.jsx)(t.p,{children:"This is mostly useful to get access to the latest value of some props or state inside an asynchronous callback, instead of that value at the time the callback was created from."}),"\n",(0,r.jsxs)(t.h2,{id:"import",children:["Import",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#import",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { useLatestRef } from '@tonic-ui/react-hooks';\n"})}),"\n",(0,r.jsxs)(t.h2,{id:"usage",children:["Usage",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#usage",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const ref = useLatestRef(value);\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"parameters",children:["Parameters",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#parameters",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{align:"left",children:"Name"}),(0,r.jsx)(t.th,{align:"left",children:"Type"}),(0,r.jsx)(t.th,{align:"left",children:"Default"}),(0,r.jsx)(t.th,{align:"left",children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{align:"left",children:"value"}),(0,r.jsx)(t.td,{align:"left",children:"any"}),(0,r.jsx)(t.td,{align:"left"}),(0,r.jsx)(t.td,{align:"left",children:"The latest value."})]})})]}),"\n",(0,r.jsxs)(t.h3,{id:"returns",children:["Returns",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#returns",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["Returns a ref object with the ",(0,r.jsx)(t.code,{children:"current"})," property set to the latest value."]}),"\n",(0,r.jsxs)(t.h2,{id:"demos",children:["Demos",(0,r.jsx)(t.a,{"aria-hidden":!0,className:"anchor-link",tabIndex:"-1",href:"#demos",children:(0,r.jsx)(t.svg,{children:(0,r.jsx)(t.use,{xlinkHref:"#anchor-link-icon"})})})]}),"\n",(0,r.jsx)(a.Z,Object.assign({},{component:h,file:{data:"import { Box, Button, Space } from '@tonic-ui/react';\nimport { useLatestRef } from '@tonic-ui/react-hooks';\nimport React, { useRef, useState } from 'react';\n\nconst App = () => {\n  const [countdownMode, setCountdownMode] = useState(false);\n  const timeoutRef = useRef(null);\n  const [count, setCount] = useState(0);\n  const latestRef = useLatestRef(count);\n\n  function handleAlertClick() {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    timeoutRef.current = setTimeout(() => {\n      alert(`Latest count value: ${latestRef.current}`);\n      timeoutRef.current = null;\n      setCountdownMode(false);\n    }, 3000);\n    setCountdownMode(true);\n  }\n\n  return (\n    <>\n      <Box mb=\"4x\">\n        You clicked {count} times\n      </Box>\n      <Button disabled={countdownMode} onClick={handleAlertClick}>\n        Show Alert In 5 Seconds\n      </Button>\n      <Space width=\"2x\" />\n      <Button disabled={!countdownMode} onClick={() => setCount(count + 1)}>\n        Click Me\n      </Button>\n    </>\n  );\n};\n\nexport default App;",path:"pages/hooks/useLatestRef.page.mdx"},sandbox:{files:{},raw:"import { Box, Button, Space } from '@tonic-ui/react';\nimport { useLatestRef } from '@tonic-ui/react-hooks';\nimport React, { useRef, useState } from 'react';\n\nconst App = () => {\n  const [countdownMode, setCountdownMode] = useState(false);\n  const timeoutRef = useRef(null);\n  const [count, setCount] = useState(0);\n  const latestRef = useLatestRef(count);\n\n  function handleAlertClick() {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n    timeoutRef.current = setTimeout(() => {\n      alert(`Latest count value: ${latestRef.current}`);\n      timeoutRef.current = null;\n      setCountdownMode(false);\n    }, 3000);\n    setCountdownMode(true);\n  }\n\n  return (\n    <>\n      <Box mb=\"4x\">\n        You clicked {count} times\n      </Box>\n      <Button disabled={countdownMode} onClick={handleAlertClick}>\n        Show Alert In 5 Seconds\n      </Button>\n      <Space width=\"2x\" />\n      <Button disabled={!countdownMode} onClick={() => setCount(count + 1)}>\n        Click Me\n      </Button>\n    </>\n  );\n};\n\nexport default App;",title:"Tonic UI"}}))]})}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(0,o.ah)(),e.components).wrapper;return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(m,e)})):m(e)}},96835:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(27216),o=n(40596),a=n(49857),l=n(73645),c=n(99870),i=n(62272),u=n(14594),s=n(65019),d=n(37384),f=n(99554),h=n(69111),m=n(5632),p=n(2784),x=n(65245);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))},y=function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,c=[],i=!0,u=!1;try{for(a=(n=n.call(e)).next;!(i=(r=a.call(n)).done)&&(c.push(r.value),2!==c.length);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1];return{value:e,onCopy:function(){v(e),o(!0),setTimeout(function(){return o(!1)},1500)},hasCopied:r}},j=n(63768),g=n(76761),k=n(73205),C=n(98107),S=n(44285),E=["component","defaultExpanded","expanded","file","sandbox"];function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,c=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t,n=e.component,b=e.defaultExpanded,v=e.expanded,w=e.file,Z=e.sandbox;!function(e,t){if(null!=e){var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}}(e,E);var A=(0,m.useRouter)(),O=R((0,p.useReducer)(function(e){return!e},!1),2),M=O[0],I=O[1],B=(0,r.u)(),_=R((0,o.Z)(),1)[0],T={dark:g.y,light:g.q}[_],N=R((0,s.Z)(null!=v?v:void 0!==b&&b),2),L=N[0],z=N[1],H=y(null==w?void 0:w.data),F=H.onCopy,P=H.hasCopied,U=(0,p.useCallback)(function(){F()},[F]),$=(0,p.useCallback)(function(){(0,k.b)(Z)},[Z]),D=(0,p.useCallback)(function(){I(),z(!1)},[I,z]);return((0,p.useEffect)(function(){void 0!==v&&v!==L&&z(v)},[v,L,z]),n)?p.createElement(x.nu,{code:null==w?void 0:w.data,disabled:!0,language:"jsx",theme:T},p.createElement(a.Z,{border:1,borderColor:{dark:"gray:70",light:"gray:30"}[_],p:"4x"},p.createElement(a.Z,{fontSize:"sm",lineHeight:"sm"},p.createElement(p.Fragment,{key:M},p.createElement(n,null)))),p.createElement(l.Z,{columnGap:"2x",justifyContent:"flex-end",mb:"4x"},p.createElement(S.Z,{"data-track":L?"CodeBlock|hide_source|".concat((0,C.Z)({path:A.pathname})):"CodeBlock|show_source|".concat((0,C.Z)({path:A.pathname})),onClick:z},p.createElement(c.Z,{label:L?"Hide the source":"Show the source"},p.createElement(d.Z,null))),p.createElement(S.Z,{"data-track":"CodeBlock|copy_source|".concat((0,C.Z)({path:A.pathname})),onClick:U},p.createElement(c.Z,{label:P?"Copied":"Copy the source"},p.createElement(f.Z,null))),p.createElement(S.Z,{"data-track":"CodeBlock|edit_in_codesandbox|".concat(A.pathname),onClick:$},p.createElement(c.Z,{label:"Edit in CodeSandbox"},p.createElement(j.Z,null))),p.createElement(S.Z,{"data-track":"CodeBlock|reset|".concat(A.pathname),onClick:D},p.createElement(c.Z,{label:"Reset the demo"},p.createElement(h.Z,null)))),p.createElement(i.Z,{in:L},p.createElement(u.Z,{in:L,unmountOnExit:!0},p.createElement(a.Z,{as:x.uz,sx:{fontFamily:"mono",fontSize:"md",lineHeight:"md",mb:"4x","& > .prism-code":{padding:"".concat(null==B?void 0:null===(t=B.space)||void 0===t?void 0:t["4x"]," !important"),overflowX:"auto"}}})))):p.createElement(x.nu,{code:null==w?void 0:w.data,disabled:!0,language:"jsx",theme:T},p.createElement(a.Z,{as:x.uz,sx:{fontFamily:"mono",fontSize:"sm","& > .prism-code":{overflowX:"auto"}}}))};Z.displayName="Demo";var A=Z},59301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hooks/useLatestRef",function(){return n(17509)}])},99554:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}}),n(2784);var r=n(75928),o=n(52903),a=(0,r.Z)((0,o.tZ)("path",{d:"M12 0h-6c-0.5 0-1 0.5-1 1v3h-3c-0.5 0-1 0.5-1 1v10c0 0.5 0.5 1 1 1h8c0.5 0 1-0.5 1-1v-3h3c0.5 0 1-0.5 1-1v-8l-3-3zM12 1.4l1.6 1.6h-1.6v-1.6zM10 15h-8v-10h5v3h3v7zM8 7v-1.6l1.6 1.6h-1.6zM14 11h-3v-4l-3-3h-2v-3h5v3h3v7z"}),"FileCopyOIcon")},69111:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}}),n(2784);var r=n(75928),o=n(52903),a=(0,r.Z)((0,o.tZ)("path",{d:"M10 7l1.995-1.995c-0.921-1.215-2.365-1.992-3.99-1.992-2.758 0-4.993 2.235-4.993 4.993s2.235 4.993 4.993 4.993c1.839 0 3.446-0.995 4.313-2.475l0.013-0.024 1.732 1c-1.233 2.111-3.487 3.507-6.068 3.507-3.867 0-7.003-3.135-7.003-7.003s3.135-7.003 7.003-7.003c2.183 0 4.133 0.999 5.417 2.565l0.010 0.012 1.579-1.579v5z"}),"RedoIcon")}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=59301)}),_N_E=e.O()}]);