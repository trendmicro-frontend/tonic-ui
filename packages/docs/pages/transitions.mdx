# Transitions

Transition helps make a UI expressive and easy to use. The Transition components use `react-transition-group` internally to perform animation effects and manage component states (including mounting and unmounting) over time.

## Import

```js
import {
  Collapse,
  Fade,
  Grow,
  Scale,
  Slide,
  Zoom,
} from '@trendmicro/react-styled-ui';
```

## Usage

### Collapse

The Collapse transition expands vertically from the top of the children. The `collapsedHeight` property can also be used to set the minimum height when collapsed.

This transition is internally used by the `Accordion` component.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Collapse
        in={isOpen}
        collapsedHeight={0}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Collapse>
    </Stack>
  );
}
```

### Fade

This transition is internally used by the `Modal` component.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Fade
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Fade>
    </Stack>
  );
}
```

### Grow

This transition is internally used by the `Popover` and `Tooltip` components.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Grow
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Grow>
    </Stack>
  );
}
```

### Scale

The Scale transition animates the scaling of the children over the specified duration.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Scale
        in={isOpen}
        unmountOnExit={false}
        initialScale={[0.9, 0.9**2]}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Scale>
    </Stack>
  );
}
```

### Slide

This transition is internally used by the `Drawer` component.

```jsx noInline
const useSelection = (defaultValue) => {
  const [value, setValue] = React.useState(defaultValue);
  const changeBy = (value) => () => setValue(value);
  return [value, changeBy];
};

function Example() {
  const { isOpen, onClose, onToggle } = useDisclosure();
  const [direction, changeDirectionBy] = useSelection('up');

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <ButtonGroup
        variant="secondary"
        css={{
          '> *:not(:first-of-type)': {
            marginLeft: -1
          }
        }}
      >
        {['up', 'down', 'left', 'right'].map(value => {
          const changeDirection = changeDirectionBy(value);
          const onClick = () => {
            changeDirection();
            onClose();
          };

          return (
            <SelectableButton
              key={value}
              selected={value === direction}
              onClick={onClick}
              minWidth="15x"
            >
              {value}
            </SelectableButton>
          );
        })}
      </ButtonGroup>
      <Box overflow="hidden">
        <Slide
          in={isOpen}
          direction={direction}
          unmountOnExit={false}
        >
          <SkeletonContent>
            <SkeletonBody />
          </SkeletonContent>
        </Slide>
      </Box>
    </Stack>
  );
}

render(<Example />);
```

### Zoom

The Zoom transition zooms in/out the displayed components.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack
      direction="column"
      spacing="4x"
      overflow="hidden"
      shouldWrapChildren
    >
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Zoom
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Zoom>
    </Stack>
  );
}
```

## Props

### Collapse

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.standard, exit: duration.standard } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Fade

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Grow

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | 'auto' \| number \| { appear?: number, enter?: number, exit?: number } | 'auto' | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |


### Scale

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeOut, exit: easing.easeIn } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| initialScale | number | 0.95 | The initial scale of the element. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: 150, exit: 150 } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Slide

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeOut, exit: easing.sharp } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| direction | string | 'down' | One of: `'up'`, `'down'`, `'left'`, `'right'` |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Zoom

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

## Overriding Easing/Timing Function

```js
<TransitionComponent
  easing={{
    enter: 'ease-in-out',
    exit: 'cubic-bezier(0.42, 0, 0.58, 1)',
  }}
  timeout={{
    enter: 225,
    exit: 195,
  }}
/>
```

or

```js
<TransitionComponent
  easing="ease-in-out"
  timeout={300}
/>
```

### easing

The timing functions are commonly called <i>easing functions</i>, and can be defined using a predefined keyword value, a stepping function, or a cubic Bezier curve.

The following specifies the easing functions that are used internally transition components.

| Pre-defined Key | Value | Description |
| :-- | :---- | :---------- |
| easing.easeInOut | `'cubic-bezier(0.4, 0, 0.2, 1)'` | This is the most common easing curve. |
| easing.easeOut | `'cubic-bezier(0.0, 0, 0.2, 1)'` | Objects enter the screen at full velocity from off-screen and slowly decelerate to a resting point. |
| easing.easeIn | `'cubic-bezier(0.4, 0, 1, 1)'` | Objects leave the screen at full velocity. They do not decelerate when off-screen. |
| easing.sharp | `'cubic-bezier(0.4, 0, 0.6, 1)'` | The sharp curve is used by objects that may return to the screen at any time. |

### timeout

The duration for the transition, in milliseconds.

The following specifies the transition duration that are used internally in transition components.

| Pre-defined Key | Value | Description |
| :--- | :------- | :---------- |
| duration.standard | 300 | This is the recommended timing for the most common transition. |
| duration.enteringScreen | 225 | This is recommended when something is entering screen. |
| duration.leavingScreen | 195 | This is recommended when something is leaving screen. |

## Inheritance

The props of the [Transition](https://reactcommunity.org/react-transition-group/transition/#Transition-props) component, from [react-transition-group](https://github.com/reactjs/react-transition-group), are also available. For more information, visit the [Transition](http://reactcommunity.org/react-transition-group/transition) documentation for detailed usage.
