# Presence

`Presence` allows components to animate out when they are removed from the React tree.

## Import

```js
import {
  Presence,
  usePresence,
} from '@tonic-ui/react';
```

## Usage

```jsx noInline
const AnimatedContainer = ({
  in: inProp,
  ...rest
}) => {
  const [, safeToRemove] = usePresence();

  return (
    <Collapse
      in={inProp}
      onExited={safeToRemove}
      timeout={1000}
    >
      <Box
        overflow="hidden"
        position="relative"
        height={200}
        {...rest}
      />
    </Collapse>
  );
};

const AnimatedRectangle = ({
  in: inProp,
  ...rest
}) => {
  const [colorMode] = useColorMode();
  const [colorStyle] = useColorStyle({ colorMode });
  const [, safeToRemove] = usePresence();
  const styleProps = {
    position: 'absolute',
    top: 0,
    left: 0,
    border: 1,
    borderColor: colorStyle.divider,
    width: 200,
    height: 200,
  };

  return (
    <Slide
      in={inProp}
      direction="right"
      onExited={safeToRemove}
      timeout={{
        enter: 500,
        exit: 1000,
      }}
    >
      <Box {...styleProps} {...rest} />
    </Slide>
  );
};

const AnimatedCircle = ({
  in: inProp,
  ...rest
}) => {
  const [colorMode] = useColorMode();
  const [colorStyle] = useColorStyle({ colorMode });
  const [, safeToRemove] = usePresence();
  const styleProps = {
    position: 'absolute',
    top: 0,
    left: 0,
    border: 1,
    borderColor: colorStyle.divider,
    borderRadius: '50%',
    width: 120,
    height: 120,
    mt: 40,
    ml: 40,
  };

  return (
    <Slide
      in={inProp}
      direction="right"
      onExited={safeToRemove}
      timeout={{
        enter: 1000,
        exit: 500,
      }}
    >
      <Box {...styleProps} {...rest} />
    </Slide>
  );
};

function Component() {
  const [text, setText] = React.useState('');
  const [isPresent, toggleIsPresent] = useToggle();
  const onExitComplete = () => {
    setText('Exit animation finished');
  };

  return (
    <>
      <Box mb="3x">
        <Button
          onClick={() => {
            if (isPresent) {
              setText('Exit animation started');
            } else {
              setText('');
            }
            toggleIsPresent();
          }}
        >
          Toggle
        </Button>
      </Box>
      <Presence
        isPresent={isPresent}
        onExitComplete={onExitComplete}
      >
        <AnimatedContainer in={isPresent}>
          <AnimatedRectangle in={isPresent} />
          <AnimatedCircle in={isPresent} />
        </AnimatedContainer>
        <Text>
          {text}
        </Text>
      </Presence>
    </>
  );
}

render(<Component />);
```


## Props

### Presence

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode | | |
| isPresent | boolean | | If `true`, the presence is active. |
| onExitComplete | function | | A callback function that is called when the exit animation is complete. |
